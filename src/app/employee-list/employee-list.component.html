<div>
  <button class="btn btn-primary" data-toggle="modal" data-target="#addModal">Add employee</button>
</div>
<br>
<table class="table table-striped">
  <thead>
    <tr>
      <th scope="col">Id</th>
      <th scope="col">First name</th>
      <th scope="col">Last name</th>
      <!-- <th scope="col">Adress</th> -->
      <th scope="col">Skype</th>
      <th scope="col">Email</th>
      <th scope="col">Phone number</th>
      <th scope="col">Active</th>
      <!-- <th scope="col">Description</th> -->
      <th scope="col">Operations</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let employee of list">
      <th>{{employee.id}}</th>
      <td>{{employee.personalInfo.firstName}}</td>
      <td>{{employee.personalInfo.lastName}}</td>
      <!-- <td>{{employee.personalInfo.adress}}</td> -->
      <td>{{employee.personalInfo.skype}}</td>
      <td>{{employee.personalInfo.email}}</td>
      <td>{{employee.personalInfo.phoneNumber}}</td>
      <td>
        <button *ngIf="employee.active===true" class="btn btn-danger ml-2"
          (click)="dismissRecoveryEmployee(0, employee.id)">Dismiss</button>
        <button *ngIf="employee.active===false" class="btn btn-primary ml-2"
          (click)="dismissRecoveryEmployee(1, employee.id)">Recovery</button>
      </td>
      <!-- <td>{{employee.personalInfo.description}}</td> -->
      <td>
        <button class="btn btn-primary ml-2" data-toggle="modal" data-target="#infoModal"
          (click)="setEditEmployee(employee)" (click)="setCurrentDepartment(employee.id)"
          (click)="setCurrentPosition(employee.id)">Info</button>
      </td>
    </tr>

  </tbody>
</table>




<!-- add modal -->
<div class="modal fade bd-example-modal-lg" id="addModal" tabindex="-1" role="dialog"
  aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalCenterTitle">Add new Employee</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form #f="ngForm">
          <div class="row">
            <div class="col">
              <div class="form-group">
                <input type="text" class="form-control" placeholder="First name" name="firstName"
                  [(ngModel)]="form.firstName" #firstName="ngModel">
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <input type="text" class="form-control" placeholder="Last name" name="lastName"
                  [(ngModel)]="form.lastName" #lastName="ngModel">
              </div>
            </div>
          </div>
          <div class="row">

            <div class="col">
              <div class="form-group">
                <input type="text" class="form-control" placeholder="Email" name="email" [(ngModel)]="form.email"
                  #email="ngModel">
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <input type="text" class="form-control" placeholder="Phone number" name="phoneNumber"
                  [(ngModel)]="form.phoneNumber" #phoneNumber="ngModel">
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <input type="text" class="form-control" placeholder="Skype" name="skype" [(ngModel)]="form.skype"
                  #skype="ngModel">
              </div>
            </div>
          </div>
          <div class="form-group">
            <input type="text" class="form-control" placeholder="Adress" name="adress" [(ngModel)]="form.adress"
              #adress="ngModel">
          </div>
          <div class="form-group">
            <textarea type="text" class="form-control" placeholder="Description" name="description"
              [(ngModel)]="form.description" #description="ngModel">
              </textarea>
          </div>
          <div class="row">
            <div class="col">
              <div class="form-group">
                <label for="position_id">Position</label>
                <select class="custom-select" name="position_id" [(ngModel)]="form.position_id" #position_id="ngModel">
                  <option *ngFor="let position of positionList" [ngValue]="position.id">{{position.name}}</option>
                </select>
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <label for="department_id">Department</label>
                <select class="custom-select" name="department_id" [(ngModel)]="form.department_id"
                  #department_id="ngModel">
                  <option *ngFor="let department of departmentList" [ngValue]="department.id">{{department.name}}
                  </option>
                </select>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" [disabled]="f.form.invalid" data-dismiss="modal"
          (click)="add(f)">Save</button>
      </div>
    </div>
  </div>
</div>

<!-- info modal -->
<div class="modal fade bd-example-modal-lg" id="infoModal" tabindex="-1" role="dialog"
  aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalCenterTitle">Employee personal info</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form name="formedit" #fedit="ngForm">
          <div class="row">
            <div class="col-2">
              <div class="form-group">
                <label>Id</label>
                <input type="text" class="form-control" disabled placeholder="Id" name="id" [(ngModel)]="formedit.id"
                  #id="ngModel">
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <label>First name</label>
                <input type="text" class="form-control" placeholder="First name" name="firstName"
                  [(ngModel)]="personalInfo.firstName" #firstName="ngModel">
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <label>Last name</label>
                <input type="text" class="form-control" placeholder="Last name" name="lastName"
                  [(ngModel)]="personalInfo.lastName" #lastName="ngModel">
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <div class="form-group">
                <label>Email</label>
                <input type="text" class="form-control" placeholder="Email" name="email"
                  [(ngModel)]="personalInfo.email" #email="ngModel">
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <label>Phone number</label>
                <input type="text" class="form-control" placeholder="Phone number" name="phoneNumber"
                  [(ngModel)]="personalInfo.phoneNumber" #phoneNumber="ngModel">
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <label>Skype</label>
                <input type="text" class="form-control" placeholder="Skype" name="skype"
                  [(ngModel)]="personalInfo.skype" #skype="ngModel">
              </div>
            </div>
          </div>
          <div class="form-group">
            <label>Adress</label>
            <input required type="text" class="form-control" placeholder="Adress" name="adress"
              [(ngModel)]="personalInfo.adress" #adress="ngModel">
          </div>
          <div class="form-group">
            <label>Description</label>
            <textarea type="text" class="form-control" placeholder="Description" name="description"
              [(ngModel)]="personalInfo.description" #description="ngModel">
              </textarea>
          </div>
        </form>
        <div class="row">
          <div class="col">
            <div class="form-group">
              <label>Current position</label>
              <input readonly type="text" class="form-control" placeholder="Current position" name="currentPositionName"
                [(ngModel)]="formchange.currentPositionName" #currentPositionName="ngModel">
            </div>
          </div>
          <div class="col">
            <button data-dismiss="editModal" class="btn btn-primary ml-2" data-toggle="modal"
              data-target="#changePositionModal" (click)="setCurrentPosition(formedit.id)">Change position</button>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="form-group">
              <label>Current department</label>
              <input readonly type="text" class="form-control" placeholder="Current department"
                name="currentDepartmentName" [(ngModel)]="formchange.currentDepartmentName"
                #currentDepartmentName="ngModel">
            </div>
          </div>
          <div class="col align-items-end">
            <button class="btn btn-primary ml-2" data-toggle="modal" data-target="#changeDepartmentModal"
              (click)="setCurrentDepartment(formedit.id)">Change department</button>
          </div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" [disabled]="fedit.form.invalid" data-dismiss="modal"
          (click)="edit(fedit)">Update</button>
      </div>
    </div>
  </div>
</div>

<!-- change position modal -->
<div class="modal fade bd-example-modal-lg" id="changePositionModal" tabindex="-1" role="dialog"
  aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalCenterTitle">Change position</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form name="formchange" #fchangeposition="ngForm">
          <div class="row">
            <div class="col">
              <div class="form-group">
                <label>Current position</label>
                <input readonly type="text" class="form-control" placeholder="Current position"
                  name="currentPositionName" [(ngModel)]="formchange.currentPositionName"
                  #currentPositionName="ngModel">
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <label for="position_id">New position</label>
                <select class="custom-select" name="position_id" [(ngModel)]="formchange.position_id"
                  #position_id="ngModel">
                  <option *ngFor="let position of positionList" [ngValue]="position.id">{{position.name}}</option>
                </select>
              </div>
            </div>
          </div>
        </form>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button [disabled]="formchange.currentPositionId==formchange.position_id" type="button"
            class="btn btn-primary" [disabled]="fchangeposition.form.invalid" data-dismiss="modal"
            (click)="changePosition()">Change</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- change department modal -->
<div class="modal fade bd-example-modal-lg" id="changeDepartmentModal" tabindex="-1" role="dialog"
  aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalCenterTitle">Change department</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form name="formchange" #fchangedepartment="ngForm">
          <div class="row">
            <div class="col">
              <div class="form-group">
                <label>Current department</label>
                <input readonly type="text" class="form-control" placeholder="Current department"
                  name="currentDepartmentName" [(ngModel)]="formchange.currentDepartmentName"
                  #currentDepartmentName="ngModel">
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <label for="department_id">New department</label>
                <select class="custom-select" name="department_id" [(ngModel)]="formchange.department_id"
                  #department_id="ngModel">
                  <option *ngFor="let department of departmentList" [ngValue]="department.id">{{department.name}}
                  </option>
                </select>
              </div>
            </div>
          </div>
        </form>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button [disabled]="formchange.currentDepartmentId==formchange.department_id" type="button"
            class="btn btn-primary" [disabled]="fchangedepartment.form.invalid" data-dismiss="modal"
            (click)="changeDepartment()">Change</button>
        </div>
      </div>
    </div>
  </div>
</div>